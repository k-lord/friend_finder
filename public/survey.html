<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!--Bootstrap CSS-->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <!--Font Awesome-->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css"
    integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
  <!--Stylesheet-->
  <link rel="stylesheet" type="text/css" href="./stylesheets/style.css">
  <title>Friend Finder Survey</title>
</head>

<body>
  <nav class="navbar sticky-top navbar-expand-lg navbar-light my-nav">
    <a id="my-brand" class="navbar-brand d-flex align-items-center" href="#">FRIEND FINDER</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul id="my-navlinks" class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/"><i class="fas fa-home"></i> HOME</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/k-lord/friend_finder"><i class="fab fa-github"></i> GITHUB</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/api/friends"><i class="fas fa-code"></i> API</a>
        </li>
      </ul>
    </div>
  </nav>

  <h2 id="header">Fill out the survey below to find someone just like you.</h2>

  <div class="container">
    <form name="survey-form" class="needs-validation" method="POST" role="form">
      <div class="form-group">
        <input type="text" name="fname" class="form-control w-100" id="userName"
          placeholder="What's your name? Enter it here." required>
        <div class="invalid-feedback">Please tell us your name.</div>
      </div>
      <div class="form-group">
        <input type="text" class="form-control w-100" id="userPic"
          placeholder="Here is where you put a link to a picture of you.">
      </div>
      <hr><br>
      <div class="form-group survey">
        <label for="q1">Question 1 Lorem ipsum dolor sit amet consectetur adipisicing elit.</label><br>
        <span>Strongly Disgree
          <input type="range" class="custom-range w-50" min="1" max="5" step="1" id="q1">
          Strongly Agree</span><br><br>
      </div>
      <hr>
      <div class="form-group survey">
        <label for="q2">Question 2 Lorem ipsum dolor sit amet consectetur adipisicing elit.</label><br>
        <span>Strongly Disgree
          <input type="range" class="custom-range w-50" min="1" max="5" step="1" id="q2">
          Strongly Agree</span><br><br>
      </div>
      <hr>
      <div class="form-group survey">
        <label for="q3">Question 3 Lorem ipsum dolor sit amet consectetur adipisicing elit.</label><br>
        <span>Strongly Disgree
          <input type="range" class="custom-range w-50" min="1" max="5" step="1" id="q3">
          Strongly Agree</span><br><br>
      </div>
      <hr>
      <div class="form-group survey">
        <label for="q4">Question 4 Lorem ipsum dolor sit amet consectetur adipisicing elit.</label><br>
        <span>Strongly Disgree
          <input type="range" class="custom-range w-50" min="1" max="5" step="1" id="q4">
          Strongly Agree</span><br><br>
      </div>
      <hr>
      <div class="form-group survey">
        <label for="q5">Question 5 Lorem ipsum dolor sit amet consectetur adipisicing elit.</label><br>
        <span>Strongly Disgree
          <input type="range" class="custom-range w-50" min="1" max="5" step="1" id="q5">
          Strongly Agree</span><br><br>
      </div>
      <hr>
      <div class="form-group survey">
        <label for="q6">Question 6 Lorem ipsum dolor sit amet consectetur adipisicing elit.</label><br>
        <span>Strongly Disgree
          <input type="range" class="custom-range w-50" min="1" max="5" step="1" id="q6">
          Strongly Agree</span><br><br>
      </div>
      <hr>
      <div class="form-group survey">
        <label for="q7">Question 7 Lorem ipsum dolor sit amet consectetur adipisicing elit.</label><br>
        <span>Strongly Disgree
          <input type="range" class="custom-range w-50" min="1" max="5" step="1" id="q7">
          Strongly Agree</span><br><br>
      </div>
      <hr>
      <div class="form-group survey">
        <label for="q8">Question 8 Lorem ipsum dolor sit amet consectetur adipisicing elit.</label><br>
        <span>Strongly Disgree
          <input type="range" class="custom-range w-50" min="1" max="5" step="1" id="q8">
          Strongly Agree</span><br><br>
      </div>
      <hr>
      <div class="form-group survey">
        <label for="q9">Question 9 Lorem ipsum dolor sit amet consectetur adipisicing elit.</label><br>
        <span>Strongly Disgree
          <input type="range" class="custom-range w-50" min="1" max="5" step="1" id="q9">
          Strongly Agree</span><br><br>
      </div>
      <hr>
      <div class="form-group survey">
        <label for="q10">Question 10 Lorem ipsum dolor sit amet consectetur adipisicing elit.</label><br>
        <span>Strongly Disgree
          <input type="range" class="custom-range w-50" min="1" max="5" step="1" id="q10">
          Strongly Agree</span><br><br>
      </div>
      <br><br>

      <button type="submit" id="submit" class="btn btn-dark btn-block" data-toggle="modal" data-target="#findmatch">FIND
        YOUR MATCH</button>
    </form>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="findmatch" tabindex="-1" role="dialog" aria-labelledby="findmatchTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="findmatchTitle">You matched with...</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div id="modalMatch" class="modal-body">
          <span id="match-name"></span><br>
          <img id="match-pic" src="./images/person-placeholder-3.jpg">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


  <script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>


  <!--Javascript logic-->
  <script>
    //on click event to create new friend object and POST to API/friends
    $("#submit").on("click", function (event) {
      event.preventDefault();
      validateForm();

      var newFriend = {
        name: $("#userName").val().trim(),
        image: $("#userPic").val().trim(),
        results: [
          parseInt($("#q1").val()),
          parseInt($("#q2").val()),
          parseInt($("#q3").val()),
          parseInt($("#q4").val()),
          parseInt($("#q5").val()),
          parseInt($("#q6").val()),
          parseInt($("#q7").val()),
          parseInt($("#q8").val()),
          parseInt($("#q9").val()),
          parseInt($("#q10").val()),
        ],
        score: 0
      };

      for (var i = 0; i < newFriend.results.length; i++) {
        newFriend.score += newFriend.results[i];
      }

      console.log(newFriend);

      $.post("/api/friends", newFriend)
        .then(function (data) {
          console.log("add.html", data);
          console.log("Adding friend...");
        });
    });

    //form validation logic
    function validateForm() {
      var x = document.forms["survey-form"]["fname"].value;
      if (x == "") {
        alert("Name must be filled out");
        return false;
        $("#findMatch").attr('style','display: none');
      }
    }




  </script>
</body>

</html>